---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";

const posts = await getCollection("blog");
posts.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<Layout
  title="Blog - Jimmy Verburgt"
  description="Welcome to the software development blog of Jimmy"
>
  <main
    class="w-full px-[5%] md:px-[15%] lg:px-[20%] mb-10 flex flex-col justify-center flex-[1_auto]"
  >
    <h1 class="text-5xl font-bold mb-10 font-pixel">Blog</h1>
    {
      posts.map((post) => {
        const formattedDate = post.data.date.toLocaleDateString("en-GB", {
          year: "numeric",
          month: "short",
          day: "numeric",
        });
        return (
          <a
            href={`/blog/${post.slug}`}
            class="border-dashed border-b py-5 flex flex-row justify-between items-center"
          >
            <div class="flex flex-col gap-5">
              <h2 class="text-2xl">{post.data.title}</h2>
              <p class="opacity-60">{post.data.description}</p>
            </div>
            <p class="font-pixel">{formattedDate}</p>
          </a>
        );
      })
    }
  </main>
</Layout>
